/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/cbor-sync@1.0.4";
exports.ids = ["vendor-chunks/cbor-sync@1.0.4"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/cbor-sync@1.0.4/node_modules/cbor-sync/main.js":
/*!***************************************************************************!*\
  !*** ./node_modules/.pnpm/cbor-sync@1.0.4/node_modules/cbor-sync/main.js ***!
  \***************************************************************************/
/***/ (function(module, exports) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {}\n})(this, function () {\n\tvar CBOR = (function () {\n\t\tfunction BinaryHex(hex) {\n\t\t\tthis.$hex = hex;\n\t\t}\n\t\tBinaryHex.prototype = {\n\t\t\tlength: function () {\n\t\t\t\treturn this.$hex.length/2;\n\t\t\t},\n\t\t\ttoString: function (format) {\n\t\t\t\tif (!format || format === 'hex' || format === 16) return this.$hex;\n\t\t\t\tif (format === 'utf-8') {\n\t\t\t\t\tvar encoded = '';\n\t\t\t\t\tfor (var i = 0; i < this.$hex.length; i += 2) {\n\t\t\t\t\t\tencoded += '%' + this.$hex.substring(i, i + 2);\n\t\t\t\t\t}\n\t\t\t\t\treturn decodeURIComponent(encoded);\n\t\t\t\t}\n\t\t\t\tif (format === 'latin') {\n\t\t\t\t\tvar encoded = [];\n\t\t\t\t\tfor (var i = 0; i < this.$hex.length; i += 2) {\n\t\t\t\t\t\tencoded.push(parseInt(this.$hex.substring(i, i + 2), 16));\n\t\t\t\t\t}\n\t\t\t\t\treturn String.fromCharCode.apply(String, encoded);\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unrecognised format: ' + format);\n\t\t\t}\n\t\t};\n\t\tBinaryHex.fromLatinString = function (latinString) {\n\t\t\tvar hex = '';\n\t\t\tfor (var i = 0; i < latinString.length; i++) {\n\t\t\t\tvar pair = latinString.charCodeAt(i).toString(16);\n\t\t\t\tif (pair.length === 1) pair = \"0\" + pair;\n\t\t\t\thex += pair;\n\t\t\t}\n\t\t\treturn new BinaryHex(hex);\n\t\t};\n\t\tBinaryHex.fromUtf8String = function (utf8String) {\n\t\t\tvar encoded = encodeURIComponent(utf8String);\n\t\t\tvar hex = '';\n\t\t\tfor (var i = 0; i < encoded.length; i++) {\n\t\t\t\tif (encoded.charAt(i) === '%') {\n\t\t\t\t\thex += encoded.substring(i + 1, i + 3);\n\t\t\t\t\ti += 2;\n\t\t\t\t} else {\n\t\t\t\t\tvar hexPair = encoded.charCodeAt(i).toString(16);\n\t\t\t\t\tif (hexPair.length < 2) hexPair = \"0\" + hexPair;\n\t\t\t\t\thex += hexPair;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new BinaryHex(hex);\n\t\t};\n\n\t\tvar semanticEncoders = [];\n\t\tvar semanticDecoders = {};\n\t\n\t\tvar notImplemented = function (label) {\n\t\t\treturn function () {\n\t\t\t\tthrow new Error(label + ' not implemented');\n\t\t\t};\n\t\t};\n\t\n\t\tfunction Reader() {\n\t\t}\n\t\tReader.prototype = {\n\t\t\tpeekByte: notImplemented('peekByte'),\n\t\t\treadByte: notImplemented('readByte'),\n\t\t\treadChunk: notImplemented('readChunk'),\n\t\t\treadFloat16: function () {\n\t\t\t\tvar half = this.readUint16();\n\t\t\t\tvar exponent = (half&0x7fff) >> 10;\n\t\t\t\tvar mantissa = half&0x3ff;\n\t\t\t\tvar negative = half&0x8000;\n\t\t\t\tif (exponent === 0x1f) {\n\t\t\t\t\tif (mantissa === 0) {\n\t\t\t\t\t\treturn negative ? -Infinity : Infinity;\n\t\t\t\t\t}\n\t\t\t\t\treturn NaN;\n\t\t\t\t}\n\t\t\t\tvar magnitude = exponent ? Math.pow(2, exponent - 25)*(1024 + mantissa) : Math.pow(2, -24)*mantissa;\n\t\t\t\treturn negative ? -magnitude : magnitude;\n\t\t\t},\n\t\t\treadFloat32: function () {\n\t\t\t\tvar intValue = this.readUint32();\n\t\t\t\tvar exponent = (intValue&0x7fffffff) >> 23;\n\t\t\t\tvar mantissa = intValue&0x7fffff;\n\t\t\t\tvar negative = intValue&0x80000000;\n\t\t\t\tif (exponent === 0xff) {\n\t\t\t\t\tif (mantissa === 0) {\n\t\t\t\t\t\treturn negative ? -Infinity : Infinity;\n\t\t\t\t\t}\n\t\t\t\t\treturn NaN;\n\t\t\t\t}\n\t\t\t\tvar magnitude = exponent ? Math.pow(2, exponent - 23 - 127)*(8388608 + mantissa) : Math.pow(2, -23 - 126)*mantissa;\n\t\t\t\treturn negative ? -magnitude : magnitude;\n\t\t\t},\n\t\t\treadFloat64: function () {\n\t\t\t\tvar int1 = this.readUint32(), int2 = this.readUint32();\n\t\t\t\tvar exponent = (int1 >> 20)&0x7ff;\n\t\t\t\tvar mantissa = (int1&0xfffff)*4294967296 + int2;\n\t\t\t\tvar negative = int1&0x80000000;\n\t\t\t\tif (exponent === 0x7ff) {\n\t\t\t\t\tif (mantissa === 0) {\n\t\t\t\t\t\treturn negative ? -Infinity : Infinity;\n\t\t\t\t\t}\n\t\t\t\t\treturn NaN;\n\t\t\t\t}\n\t\t\t\tvar magnitude = exponent ? Math.pow(2, exponent - 52 - 1023)*(4503599627370496 + mantissa) : Math.pow(2, -52 - 1022)*mantissa;\n\t\t\t\treturn negative ? -magnitude : magnitude;\n\t\t\t},\n\t\t\treadUint16: function () {\n\t\t\t\treturn this.readByte()*256 + this.readByte();\n\t\t\t},\n\t\t\treadUint32: function () {\n\t\t\t\treturn this.readUint16()*65536 + this.readUint16();\n\t\t\t},\n\t\t\treadUint64: function () {\n\t\t\t\treturn this.readUint32()*4294967296 + this.readUint32();\n\t\t\t}\n\t\t};\n\t\tfunction Writer() {\n\t\t}\n\t\tWriter.prototype = {\n\t\t\twriteByte: notImplemented('writeByte'),\n\t\t\tresult: notImplemented('result'),\n\t\t\twriteFloat16: notImplemented('writeFloat16'),\n\t\t\twriteFloat32: notImplemented('writeFloat32'),\n\t\t\twriteFloat64: notImplemented('writeFloat64'),\n\t\t\twriteUint16: function (value) {\n\t\t\t\tthis.writeByte((value >> 8)&0xff);\n\t\t\t\tthis.writeByte(value&0xff);\n\t\t\t},\n\t\t\twriteUint32: function (value) {\n\t\t\t\tthis.writeUint16((value>>16)&0xffff);\n\t\t\t\tthis.writeUint16(value&0xffff);\n\t\t\t},\n\t\t\twriteUint64: function (value) {\n\t\t\t\tif (value >= 9007199254740992 || value <= -9007199254740992) {\n\t\t\t\t\tthrow new Error('Cannot encode Uint64 of: ' + value + ' magnitude to big (floating point errors)');\n\t\t\t\t}\n\t\t\t\tthis.writeUint32(Math.floor(value/4294967296));\n\t\t\t\tthis.writeUint32(value%4294967296);\n\t\t\t},\n\t\t\twriteString: notImplemented('writeString'),\n\t\t\tcanWriteBinary: function (chunk) {\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\twriteBinary: notImplemented('writeChunk')\n\t\t};\n\n\t\tfunction readHeaderRaw(reader) {\n\t\t\tvar firstByte = reader.readByte();\n\t\t\tvar majorType = firstByte >> 5, value = firstByte&0x1f;\n\t\t\treturn {type: majorType, value: value};\n\t\t}\n\t\n\t\tfunction valueFromHeader(header, reader) {\n\t\t\tvar value = header.value;\n\t\t\tif (value < 24) {\n\t\t\t\treturn value;\n\t\t\t} else if (value == 24) {\n\t\t\t\treturn reader.readByte();\n\t\t\t} else if (value == 25) {\n\t\t\t\treturn reader.readUint16();\n\t\t\t} else if (value == 26) {\n\t\t\t\treturn reader.readUint32();\n\t\t\t} else if (value == 27) {\n\t\t\t\treturn reader.readUint64();\n\t\t\t} else if (value == 31) {\n\t\t\t\t// special value for non-terminating arrays/objects\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tnotImplemented('Additional info: ' + value)();\n\t\t}\n\t\n\t\tfunction writeHeaderRaw(type, value, writer) {\n\t\t\twriter.writeByte((type<<5)|value);\n\t\t}\n\t\n\t\tfunction writeHeader(type, value, writer) {\n\t\t\tvar firstByte = type<<5;\n\t\t\tif (value < 24) {\n\t\t\t\twriter.writeByte(firstByte|value);\n\t\t\t} else if (value < 256) {\n\t\t\t\twriter.writeByte(firstByte|24);\n\t\t\t\twriter.writeByte(value);\n\t\t\t} else if (value < 65536) {\n\t\t\t\twriter.writeByte(firstByte|25);\n\t\t\t\twriter.writeUint16(value);\n\t\t\t} else if (value < 4294967296) {\n\t\t\t\twriter.writeByte(firstByte|26);\n\t\t\t\twriter.writeUint32(value);\n\t\t\t} else {\n\t\t\t\twriter.writeByte(firstByte|27);\n\t\t\t\twriter.writeUint64(value);\n\t\t\t}\n\t\t}\n\t\n\t\tvar stopCode = new Error(); // Just a unique object, that won't compare strictly equal to anything else\n\t\n\t\tfunction decodeReader(reader) {\n\t\t\tvar header = readHeaderRaw(reader);\n\t\t\tswitch (header.type) {\n\t\t\t\tcase 0:\n\t\t\t\t\treturn valueFromHeader(header, reader);\n\t\t\t\tcase 1:\n\t\t\t\t\treturn -1 -valueFromHeader(header, reader);\n\t\t\t\tcase 2:\n\t\t\t\t\treturn reader.readChunk(valueFromHeader(header, reader));\n\t\t\t\tcase 3:\n\t\t\t\t\tvar buffer = reader.readChunk(valueFromHeader(header, reader));\n\t\t\t\t\treturn buffer.toString('utf-8');\n\t\t\t\tcase 4:\n\t\t\t\tcase 5:\n\t\t\t\t\tvar arrayLength = valueFromHeader(header, reader);\n\t\t\t\t\tvar result = [];\n\t\t\t\t\tif (arrayLength !== null) {\n\t\t\t\t\t\tif (header.type === 5) {\n\t\t\t\t\t\t\tarrayLength *= 2;\n\t\t\t\t\t\t} \n\t\t\t\t\t\tfor (var i = 0; i < arrayLength; i++) {\n\t\t\t\t\t\t\tresult[i] = decodeReader(reader);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar item;\n\t\t\t\t\t\twhile ((item = decodeReader(reader)) !== stopCode) {\n\t\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (header.type === 5) {\n\t\t\t\t\t\tvar objResult = {};\n\t\t\t\t\t\tfor (var i = 0; i < result.length; i += 2) {\n\t\t\t\t\t\t\tobjResult[result[i]] = result[i + 1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn objResult;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\tcase 6:\n\t\t\t\t\tvar tag = valueFromHeader(header, reader);\n\t\t\t\t\tvar decoder = semanticDecoders[tag];\n\t\t\t\t\tvar result = decodeReader(reader);\n\t\t\t\t\treturn decoder ? decoder(result) : result;\n\t\t\t\tcase 7:\n\t\t\t\t\tif (header.value === 25) {\n\t\t\t\t\t\treturn reader.readFloat16();\n\t\t\t\t\t} else if (header.value === 26) {\n\t\t\t\t\t\treturn reader.readFloat32();\n\t\t\t\t\t} else if (header.value === 27) {\n\t\t\t\t\t\treturn reader.readFloat64();\n\t\t\t\t\t}\n\t\t\t\t\tswitch (valueFromHeader(header, reader)) {\n\t\t\t\t\t\tcase 20:\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\tcase 21:\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\tcase 22:\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\tcase 23:\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\tcase null:\n\t\t\t\t\t\t\treturn stopCode;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthrow new Error('Unknown fixed value: ' + header.value);\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Unsupported header: ' + JSON.stringify(header));\n\t\t\t}\n\t\t\tthrow new Error('not implemented yet');\n\t\t}\n\t\n\t\tfunction encodeWriter(data, writer) {\n\t\t\tfor (var i = 0; i < semanticEncoders.length; i++) {\n\t\t\t\tvar replacement = semanticEncoders[i].fn(data);\n\t\t\t\tif (replacement !== undefined) {\n\t\t\t\t\twriteHeader(6, semanticEncoders[i].tag, writer);\n\t\t\t\t\treturn encodeWriter(replacement, writer);\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\tif (data && typeof data.toCBOR === 'function') {\n\t\t\t\tdata = data.toCBOR();\n\t\t\t}\n\t\t\n\t\t\tif (data === false) {\n\t\t\t\twriteHeader(7, 20, writer);\n\t\t\t} else if (data === true) {\n\t\t\t\twriteHeader(7, 21, writer);\n\t\t\t} else if (data === null) {\n\t\t\t\twriteHeader(7, 22, writer);\n\t\t\t} else if (data === undefined) {\n\t\t\t\twriteHeader(7, 23, writer);\n\t\t\t} else if (typeof data === 'number') {\n\t\t\t\tif (Math.floor(data) === data && data < 9007199254740992 && data > -9007199254740992) {\n\t\t\t\t\t// Integer\n\t\t\t\t\tif (data < 0) {\n\t\t\t\t\t\twriteHeader(1, -1 - data, writer);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twriteHeader(0, data, writer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twriteHeaderRaw(7, 27, writer);\n\t\t\t\t\twriter.writeFloat64(data);\n\t\t\t\t}\n\t\t\t} else if (typeof data === 'string') {\n\t\t\t\twriter.writeString(data, function (length) {\n\t\t\t\t\twriteHeader(3, length, writer);\n\t\t\t\t});\n\t\t\t} else if (writer.canWriteBinary(data)) {\n\t\t\t\twriter.writeBinary(data, function (length) {\n\t\t\t\t\twriteHeader(2, length, writer);\n\t\t\t\t});\n\t\t\t} else if (typeof data === 'object') {\n\t\t\t\tif (api.config.useToJSON && typeof data.toJSON === 'function') {\n\t\t\t   \t\tdata = data.toJSON();\n\t\t\t   \t}\n\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\twriteHeader(4, data.length, writer);\n\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\tencodeWriter(data[i], writer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar keys = Object.keys(data);\n\t\t\t\t\twriteHeader(5, keys.length, writer);\n\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\tencodeWriter(keys[i], writer);\n\t\t\t\t\t\tencodeWriter(data[keys[i]], writer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error('CBOR encoding not supported: ' + data);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar readerFunctions = [];\n\t\tvar writerFunctions = [];\n\t\n\t\tvar api = {\n\t\t\tconfig: {\n\t\t\t\tuseToJSON: true\n\t\t\t},\n\t\t\taddWriter: function (format, writerFunction) {\n\t\t\t\tif (typeof format === 'string') {\n\t\t\t\t\twriterFunctions.push(function (f) {\n\t\t\t\t\t\tif (format === f) return writerFunction(f);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twriterFunctions.push(format);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddReader: function (format, readerFunction) {\n\t\t\t\tif (typeof format === 'string') {\n\t\t\t\t\treaderFunctions.push(function (data, f) {\n\t\t\t\t\t\tif (format === f) return readerFunction(data, f);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treaderFunctions.push(format);\n\t\t\t\t}\n\t\t\t},\n\t\t\tencode: function (data, format) {\n\t\t\t\tfor (var i = 0; i < writerFunctions.length; i++) {\n\t\t\t\t\tvar func = writerFunctions[i];\n\t\t\t\t\tvar writer = func(format);\n\t\t\t\t\tif (writer) {\n\t\t\t\t\t\tencodeWriter(data, writer);\n\t\t\t\t\t\treturn writer.result();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unsupported output format: ' + format);\n\t\t\t},\n\t\t\tdecode: function (data, format) {\n\t\t\t\tfor (var i = 0; i < readerFunctions.length; i++) {\n\t\t\t\t\tvar func = readerFunctions[i];\n\t\t\t\t\tvar reader = func(data, format);\n\t\t\t\t\tif (reader) {\n\t\t\t\t\t\treturn decodeReader(reader);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unsupported input format: ' + format);\n\t\t\t},\n\t\t\taddSemanticEncode: function (tag, fn) {\n\t\t\t\tif (typeof tag !== 'number' || tag%1 !== 0 || tag < 0) {\n\t\t\t\t\tthrow new Error('Tag must be a positive integer');\n\t\t\t\t}\n\t\t\t\tsemanticEncoders.push({tag: tag, fn: fn});\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\taddSemanticDecode: function (tag, fn) {\n\t\t\t\tif (typeof tag !== 'number' || tag%1 !== 0 || tag < 0) {\n\t\t\t\t\tthrow new Error('Tag must be a positive integer');\n\t\t\t\t}\n\t\t\t\tsemanticDecoders[tag] = fn;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tReader: Reader,\n\t\t\tWriter: Writer\n\t\t};\n\t\t\n\t\t/** Node.js Buffers **/\n\t\tfunction BufferReader(buffer) {\n\t\t\tthis.buffer = buffer;\n\t\t\tthis.pos = 0;\n\t\t}\n\t\tBufferReader.prototype = Object.create(Reader.prototype);\n\t\tBufferReader.prototype.peekByte = function () {\n\t\t\treturn this.buffer[this.pos];\n\t\t};\n\t\tBufferReader.prototype.readByte = function () {\n\t\t\treturn this.buffer[this.pos++];\n\t\t};\n\t\tBufferReader.prototype.readUint16 = function () {\n\t\t\tvar result = this.buffer.readUInt16BE(this.pos);\n\t\t\tthis.pos += 2;\n\t\t\treturn result;\n\t\t};\n\t\tBufferReader.prototype.readUint32 = function () {\n\t\t\tvar result = this.buffer.readUInt32BE(this.pos);\n\t\t\tthis.pos += 4;\n\t\t\treturn result;\n\t\t};\n\t\tBufferReader.prototype.readFloat32 = function () {\n\t\t\tvar result = this.buffer.readFloatBE(this.pos);\n\t\t\tthis.pos += 4;\n\t\t\treturn result;\n\t\t};\n\t\tBufferReader.prototype.readFloat64 = function () {\n\t\t\tvar result = this.buffer.readDoubleBE(this.pos);\n\t\t\tthis.pos += 8;\n\t\t\treturn result;\n\t\t};\n\t\tBufferReader.prototype.readChunk = function (length) {\n\t\t\tvar result = Buffer.alloc(length);\n\t\t\tthis.buffer.copy(result, 0, this.pos, this.pos += length);\n\t\t\treturn result;\n\t\t};\n\t\n\t\tfunction BufferWriter(stringFormat) {\n\t\t\tthis.byteLength = 0;\n\t\t\tthis.defaultBufferLength = 16384; // 16k\n\t\t\tthis.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n\t\t\tthis.latestBufferOffset = 0;\n\t\t\tthis.completeBuffers = [];\n\t\t\tthis.stringFormat = stringFormat;\n\t\t}\n\t\tBufferWriter.prototype = Object.create(Writer.prototype);\n\t\tBufferWriter.prototype.writeByte = function (value) {\n\t\t\tthis.latestBuffer[this.latestBufferOffset++] = value;\n\t\t\tif (this.latestBufferOffset >= this.latestBuffer.length) {\n\t\t\t\tthis.completeBuffers.push(this.latestBuffer);\n\t\t\t\tthis.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n\t\t\t\tthis.latestBufferOffset = 0;\n\t\t\t}\n\t\t\tthis.byteLength++;\n\t\t}\n\t\tBufferWriter.prototype.writeFloat32 = function (value) {\n\t\t\tvar buffer = Buffer.alloc(4);\n\t\t\tbuffer.writeFloatBE(value, 0);\n\t\t\tthis.writeBuffer(buffer);\n\t\t};\n\t\tBufferWriter.prototype.writeFloat64 = function (value) {\n\t\t\tvar buffer = Buffer.alloc(8);\n\t\t\tbuffer.writeDoubleBE(value, 0);\n\t\t\tthis.writeBuffer(buffer);\n\t\t};\n\t\tBufferWriter.prototype.writeString = function (string, lengthFunc) {\n\t\t\tvar buffer = Buffer.from(string, 'utf-8');\n\t\t\tlengthFunc(buffer.length);\n\t\t\tthis.writeBuffer(buffer);\n\t\t};\n\t\tBufferWriter.prototype.canWriteBinary = function (data) {\n\t\t\treturn data instanceof Buffer;\n\t\t};\n\t\tBufferWriter.prototype.writeBinary = function (buffer, lengthFunc) {\n\t\t\tlengthFunc(buffer.length);\n\t\t\tthis.writeBuffer(buffer);\n\t\t};\n\t\tBufferWriter.prototype.writeBuffer = function (chunk) {\n\t\t\tif (!(chunk instanceof Buffer)) throw new TypeError('BufferWriter only accepts Buffers');\n\t\t\tif (!this.latestBufferOffset) {\n\t\t\t\tthis.completeBuffers.push(chunk);\n\t\t\t} else if (this.latestBuffer.length - this.latestBufferOffset >= chunk.length) {\n\t\t\t\tchunk.copy(this.latestBuffer, this.latestBufferOffset);\n\t\t\t\tthis.latestBufferOffset += chunk.length;\n\t\t\t\tif (this.latestBufferOffset >= this.latestBuffer.length) {\n\t\t\t\t\tthis.completeBuffers.push(this.latestBuffer);\n\t\t\t\t\tthis.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n\t\t\t\t\tthis.latestBufferOffset = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.completeBuffers.push(this.latestBuffer.slice(0, this.latestBufferOffset));\n\t\t\t\tthis.completeBuffers.push(chunk);\n\t\t\t\tthis.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n\t\t\t\tthis.latestBufferOffset = 0;\n\t\t\t}\n\t\t\tthis.byteLength += chunk.length;\n\t\t}\n\t\tBufferWriter.prototype.result = function () {\n\t\t\t// Copies them all into a single Buffer\n\t\t\tvar result = Buffer.alloc(this.byteLength);\n\t\t\tvar offset = 0;\n\t\t\tfor (var i = 0; i < this.completeBuffers.length; i++) {\n\t\t\t\tvar buffer = this.completeBuffers[i];\n\t\t\t\tbuffer.copy(result, offset, 0, buffer.length);\n\t\t\t\toffset += buffer.length;\n\t\t\t}\n\t\t\tif (this.latestBufferOffset) {\n\t\t\t\tthis.latestBuffer.copy(result, offset, 0, this.latestBufferOffset);\n\t\t\t}\n\t\t\t\n\t\t\tif (this.stringFormat) return result.toString(this.stringFormat);\n\t\t\treturn result;\n\t\t}\n\t\t\n\t\tif (typeof Buffer === 'function') {\n\t\t\tapi.addReader(function (data, format) {\n\t\t\t\tif (data instanceof Buffer) {\n\t\t\t\t\treturn new BufferReader(data);\n\t\t\t\t}\n\t\t\t\tif (format === 'hex' || format === 'base64') {\n\t\t\t\t\tvar buffer = Buffer.from(data, format);\n\t\t\t\t\treturn new BufferReader(buffer);\n\t\t\t\t}\n\t\t\t});\n\t\t\tapi.addWriter(function (format) {\n\t\t\t\tif (!format || format === 'buffer') {\n\t\t\t\t\treturn new BufferWriter();\n\t\t\t\t} else if (format === 'hex' || format === 'base64') {\n\t\t\t\t\treturn new BufferWriter(format);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t/** Hex-encoding (and Latin1) for browser **/\n\t\tfunction HexReader(hex) {\n\t\t\tthis.hex = hex;\n\t\t\tthis.pos = 0;\n\t\t}\n\t\tHexReader.prototype = Object.create(Reader.prototype);\n\t\tHexReader.prototype.peekByte = function () {\n\t\t\tvar pair = this.hex.substring(this.pos, 2);\n\t\t\treturn parseInt(pair, 16);\n\t\t};\n\t\tHexReader.prototype.readByte = function () {\n\t\t\tvar pair = this.hex.substring(this.pos, this.pos + 2);\n\t\t\tthis.pos += 2;\n\t\t\treturn parseInt(pair, 16);\n\t\t};\n\t\tHexReader.prototype.readChunk = function (length) {\n\t\t\tvar hex = this.hex.substring(this.pos, this.pos + length*2);\n\t\t\tthis.pos += length*2;\n\t\t\tif (typeof Buffer === 'function') return Buffer.from(hex, 'hex');\n\t\t\treturn new BinaryHex(hex);\n\t\t};\n\t\n\t\tfunction HexWriter(finalFormat) {\n\t\t\tthis.$hex = '';\n\t\t\tthis.finalFormat = finalFormat || 'hex'\n\t\t}\n\t\tHexWriter.prototype = Object.create(Writer.prototype);\n\t\tHexWriter.prototype.writeByte = function (value) {\n\t\t\tif (value < 0 || value > 255) throw new Error('Byte value out of range: ' + value);\n\t\t\tvar hex = value.toString(16);\n\t\t\tif (hex.length == 1) {\n\t\t\t\thex = '0' + hex;\n\t\t\t}\n\t\t\tthis.$hex += hex;\n\t\t}\n\t\tHexWriter.prototype.canWriteBinary = function (chunk) {\n\t\t\treturn chunk instanceof BinaryHex || (typeof Buffer === 'function' && chunk instanceof Buffer);\n\t\t}\n\t\tHexWriter.prototype.writeBinary = function (chunk, lengthFunction) {\n\t\t\tif (chunk instanceof BinaryHex) {\n\t\t\t\tlengthFunction(chunk.length());\n\t\t\t\tthis.$hex += chunk.$hex;\n\t\t\t} else if (typeof Buffer === 'function' && chunk instanceof Buffer) {\n\t\t\t\tlengthFunction(chunk.length);\n\t\t\t\tthis.$hex += chunk.toString('hex');\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('HexWriter only accepts BinaryHex or Buffers');\n\t\t\t}\n\t\t}\n\t\tHexWriter.prototype.result = function () {\n\t\t\tif (this.finalFormat === 'buffer' && typeof Buffer === 'function') {\n\t\t\t\treturn Buffer.from(this.$hex, 'hex');\n\t\t\t}\n\t\t\treturn new BinaryHex(this.$hex).toString(this.finalFormat);\n\t\t}\n\t\tHexWriter.prototype.writeString = function (string, lengthFunction) {\n\t\t\tvar buffer = BinaryHex.fromUtf8String(string);\n\t\t\tlengthFunction(buffer.length());\n\t\t\tthis.$hex += buffer.$hex;\n\t\t}\n\n\t\tapi.addReader(function (data, format) {\n\t\t\tif (data instanceof BinaryHex || data.$hex) {\n\t\t\t\treturn new HexReader(data.$hex);\n\t\t\t}\n\t\t\tif (format === 'hex') {\n\t\t\t\treturn new HexReader(data)\n\t\t\t}\n\t\t});\n\t\tapi.addWriter(function (format) {\n\t\t\tif (format === 'hex') {\n\t\t\t\treturn new HexWriter();\n\t\t\t}\n\t\t});\n\n\t\treturn api;\n\t})();\n\n\tCBOR.addSemanticEncode(0, function (data) {\n\t\tif (data instanceof Date) {\n\t\t\treturn data.toISOString();\n\t\t}\n\t}).addSemanticDecode(0, function (isoString) {\n\t\treturn new Date(isoString);\n\t}).addSemanticDecode(1, function (isoString) {\n\t\treturn new Date(isoString);\n\t});\n\n\treturn CBOR;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vY2Jvci1zeW5jQDEuMC40L25vZGVfbW9kdWxlcy9jYm9yLXN5bmMvbWFpbi5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBLEtBQUssSUFBMEM7QUFDL0MsRUFBRSxpQ0FBTyxFQUFFLG9DQUFFLE9BQU87QUFBQTtBQUFBO0FBQUEsa0dBQUM7QUFDckIsR0FBRyxLQUFLLEVBSU47QUFDRixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0JBQXNCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzQkFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHdCQUF3QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpQ0FBaUM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxFQUFFOztBQUVGO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsiL3dvcmtzcGFjZXMvaXdvLXBsYXRmb3JtL25vZGVfbW9kdWxlcy8ucG5wbS9jYm9yLXN5bmNAMS4wLjQvbm9kZV9tb2R1bGVzL2Nib3Itc3luYy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKXtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0fSBlbHNlIHtcblx0XHRnbG9iYWwuQ0JPUiA9IGZhY3RvcnkoKTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24gKCkge1xuXHR2YXIgQ0JPUiA9IChmdW5jdGlvbiAoKSB7XG5cdFx0ZnVuY3Rpb24gQmluYXJ5SGV4KGhleCkge1xuXHRcdFx0dGhpcy4kaGV4ID0gaGV4O1xuXHRcdH1cblx0XHRCaW5hcnlIZXgucHJvdG90eXBlID0ge1xuXHRcdFx0bGVuZ3RoOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLiRoZXgubGVuZ3RoLzI7XG5cdFx0XHR9LFxuXHRcdFx0dG9TdHJpbmc6IGZ1bmN0aW9uIChmb3JtYXQpIHtcblx0XHRcdFx0aWYgKCFmb3JtYXQgfHwgZm9ybWF0ID09PSAnaGV4JyB8fCBmb3JtYXQgPT09IDE2KSByZXR1cm4gdGhpcy4kaGV4O1xuXHRcdFx0XHRpZiAoZm9ybWF0ID09PSAndXRmLTgnKSB7XG5cdFx0XHRcdFx0dmFyIGVuY29kZWQgPSAnJztcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGhleC5sZW5ndGg7IGkgKz0gMikge1xuXHRcdFx0XHRcdFx0ZW5jb2RlZCArPSAnJScgKyB0aGlzLiRoZXguc3Vic3RyaW5nKGksIGkgKyAyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZm9ybWF0ID09PSAnbGF0aW4nKSB7XG5cdFx0XHRcdFx0dmFyIGVuY29kZWQgPSBbXTtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGhleC5sZW5ndGg7IGkgKz0gMikge1xuXHRcdFx0XHRcdFx0ZW5jb2RlZC5wdXNoKHBhcnNlSW50KHRoaXMuJGhleC5zdWJzdHJpbmcoaSwgaSArIDIpLCAxNikpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGVuY29kZWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignVW5yZWNvZ25pc2VkIGZvcm1hdDogJyArIGZvcm1hdCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRCaW5hcnlIZXguZnJvbUxhdGluU3RyaW5nID0gZnVuY3Rpb24gKGxhdGluU3RyaW5nKSB7XG5cdFx0XHR2YXIgaGV4ID0gJyc7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxhdGluU3RyaW5nLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBwYWlyID0gbGF0aW5TdHJpbmcuY2hhckNvZGVBdChpKS50b1N0cmluZygxNik7XG5cdFx0XHRcdGlmIChwYWlyLmxlbmd0aCA9PT0gMSkgcGFpciA9IFwiMFwiICsgcGFpcjtcblx0XHRcdFx0aGV4ICs9IHBhaXI7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmV3IEJpbmFyeUhleChoZXgpO1xuXHRcdH07XG5cdFx0QmluYXJ5SGV4LmZyb21VdGY4U3RyaW5nID0gZnVuY3Rpb24gKHV0ZjhTdHJpbmcpIHtcblx0XHRcdHZhciBlbmNvZGVkID0gZW5jb2RlVVJJQ29tcG9uZW50KHV0ZjhTdHJpbmcpO1xuXHRcdFx0dmFyIGhleCA9ICcnO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbmNvZGVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChlbmNvZGVkLmNoYXJBdChpKSA9PT0gJyUnKSB7XG5cdFx0XHRcdFx0aGV4ICs9IGVuY29kZWQuc3Vic3RyaW5nKGkgKyAxLCBpICsgMyk7XG5cdFx0XHRcdFx0aSArPSAyO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciBoZXhQYWlyID0gZW5jb2RlZC5jaGFyQ29kZUF0KGkpLnRvU3RyaW5nKDE2KTtcblx0XHRcdFx0XHRpZiAoaGV4UGFpci5sZW5ndGggPCAyKSBoZXhQYWlyID0gXCIwXCIgKyBoZXhQYWlyO1xuXHRcdFx0XHRcdGhleCArPSBoZXhQYWlyO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmV3IEJpbmFyeUhleChoZXgpO1xuXHRcdH07XG5cblx0XHR2YXIgc2VtYW50aWNFbmNvZGVycyA9IFtdO1xuXHRcdHZhciBzZW1hbnRpY0RlY29kZXJzID0ge307XG5cdFxuXHRcdHZhciBub3RJbXBsZW1lbnRlZCA9IGZ1bmN0aW9uIChsYWJlbCkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGxhYmVsICsgJyBub3QgaW1wbGVtZW50ZWQnKTtcblx0XHRcdH07XG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gUmVhZGVyKCkge1xuXHRcdH1cblx0XHRSZWFkZXIucHJvdG90eXBlID0ge1xuXHRcdFx0cGVla0J5dGU6IG5vdEltcGxlbWVudGVkKCdwZWVrQnl0ZScpLFxuXHRcdFx0cmVhZEJ5dGU6IG5vdEltcGxlbWVudGVkKCdyZWFkQnl0ZScpLFxuXHRcdFx0cmVhZENodW5rOiBub3RJbXBsZW1lbnRlZCgncmVhZENodW5rJyksXG5cdFx0XHRyZWFkRmxvYXQxNjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgaGFsZiA9IHRoaXMucmVhZFVpbnQxNigpO1xuXHRcdFx0XHR2YXIgZXhwb25lbnQgPSAoaGFsZiYweDdmZmYpID4+IDEwO1xuXHRcdFx0XHR2YXIgbWFudGlzc2EgPSBoYWxmJjB4M2ZmO1xuXHRcdFx0XHR2YXIgbmVnYXRpdmUgPSBoYWxmJjB4ODAwMDtcblx0XHRcdFx0aWYgKGV4cG9uZW50ID09PSAweDFmKSB7XG5cdFx0XHRcdFx0aWYgKG1hbnRpc3NhID09PSAwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbmVnYXRpdmUgPyAtSW5maW5pdHkgOiBJbmZpbml0eTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIE5hTjtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgbWFnbml0dWRlID0gZXhwb25lbnQgPyBNYXRoLnBvdygyLCBleHBvbmVudCAtIDI1KSooMTAyNCArIG1hbnRpc3NhKSA6IE1hdGgucG93KDIsIC0yNCkqbWFudGlzc2E7XG5cdFx0XHRcdHJldHVybiBuZWdhdGl2ZSA/IC1tYWduaXR1ZGUgOiBtYWduaXR1ZGU7XG5cdFx0XHR9LFxuXHRcdFx0cmVhZEZsb2F0MzI6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIGludFZhbHVlID0gdGhpcy5yZWFkVWludDMyKCk7XG5cdFx0XHRcdHZhciBleHBvbmVudCA9IChpbnRWYWx1ZSYweDdmZmZmZmZmKSA+PiAyMztcblx0XHRcdFx0dmFyIG1hbnRpc3NhID0gaW50VmFsdWUmMHg3ZmZmZmY7XG5cdFx0XHRcdHZhciBuZWdhdGl2ZSA9IGludFZhbHVlJjB4ODAwMDAwMDA7XG5cdFx0XHRcdGlmIChleHBvbmVudCA9PT0gMHhmZikge1xuXHRcdFx0XHRcdGlmIChtYW50aXNzYSA9PT0gMCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5lZ2F0aXZlID8gLUluZmluaXR5IDogSW5maW5pdHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBOYU47XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIG1hZ25pdHVkZSA9IGV4cG9uZW50ID8gTWF0aC5wb3coMiwgZXhwb25lbnQgLSAyMyAtIDEyNykqKDgzODg2MDggKyBtYW50aXNzYSkgOiBNYXRoLnBvdygyLCAtMjMgLSAxMjYpKm1hbnRpc3NhO1xuXHRcdFx0XHRyZXR1cm4gbmVnYXRpdmUgPyAtbWFnbml0dWRlIDogbWFnbml0dWRlO1xuXHRcdFx0fSxcblx0XHRcdHJlYWRGbG9hdDY0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBpbnQxID0gdGhpcy5yZWFkVWludDMyKCksIGludDIgPSB0aGlzLnJlYWRVaW50MzIoKTtcblx0XHRcdFx0dmFyIGV4cG9uZW50ID0gKGludDEgPj4gMjApJjB4N2ZmO1xuXHRcdFx0XHR2YXIgbWFudGlzc2EgPSAoaW50MSYweGZmZmZmKSo0Mjk0OTY3Mjk2ICsgaW50Mjtcblx0XHRcdFx0dmFyIG5lZ2F0aXZlID0gaW50MSYweDgwMDAwMDAwO1xuXHRcdFx0XHRpZiAoZXhwb25lbnQgPT09IDB4N2ZmKSB7XG5cdFx0XHRcdFx0aWYgKG1hbnRpc3NhID09PSAwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbmVnYXRpdmUgPyAtSW5maW5pdHkgOiBJbmZpbml0eTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIE5hTjtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgbWFnbml0dWRlID0gZXhwb25lbnQgPyBNYXRoLnBvdygyLCBleHBvbmVudCAtIDUyIC0gMTAyMykqKDQ1MDM1OTk2MjczNzA0OTYgKyBtYW50aXNzYSkgOiBNYXRoLnBvdygyLCAtNTIgLSAxMDIyKSptYW50aXNzYTtcblx0XHRcdFx0cmV0dXJuIG5lZ2F0aXZlID8gLW1hZ25pdHVkZSA6IG1hZ25pdHVkZTtcblx0XHRcdH0sXG5cdFx0XHRyZWFkVWludDE2OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnJlYWRCeXRlKCkqMjU2ICsgdGhpcy5yZWFkQnl0ZSgpO1xuXHRcdFx0fSxcblx0XHRcdHJlYWRVaW50MzI6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMucmVhZFVpbnQxNigpKjY1NTM2ICsgdGhpcy5yZWFkVWludDE2KCk7XG5cdFx0XHR9LFxuXHRcdFx0cmVhZFVpbnQ2NDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5yZWFkVWludDMyKCkqNDI5NDk2NzI5NiArIHRoaXMucmVhZFVpbnQzMigpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0ZnVuY3Rpb24gV3JpdGVyKCkge1xuXHRcdH1cblx0XHRXcml0ZXIucHJvdG90eXBlID0ge1xuXHRcdFx0d3JpdGVCeXRlOiBub3RJbXBsZW1lbnRlZCgnd3JpdGVCeXRlJyksXG5cdFx0XHRyZXN1bHQ6IG5vdEltcGxlbWVudGVkKCdyZXN1bHQnKSxcblx0XHRcdHdyaXRlRmxvYXQxNjogbm90SW1wbGVtZW50ZWQoJ3dyaXRlRmxvYXQxNicpLFxuXHRcdFx0d3JpdGVGbG9hdDMyOiBub3RJbXBsZW1lbnRlZCgnd3JpdGVGbG9hdDMyJyksXG5cdFx0XHR3cml0ZUZsb2F0NjQ6IG5vdEltcGxlbWVudGVkKCd3cml0ZUZsb2F0NjQnKSxcblx0XHRcdHdyaXRlVWludDE2OiBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdFx0dGhpcy53cml0ZUJ5dGUoKHZhbHVlID4+IDgpJjB4ZmYpO1xuXHRcdFx0XHR0aGlzLndyaXRlQnl0ZSh2YWx1ZSYweGZmKTtcblx0XHRcdH0sXG5cdFx0XHR3cml0ZVVpbnQzMjogZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdHRoaXMud3JpdGVVaW50MTYoKHZhbHVlPj4xNikmMHhmZmZmKTtcblx0XHRcdFx0dGhpcy53cml0ZVVpbnQxNih2YWx1ZSYweGZmZmYpO1xuXHRcdFx0fSxcblx0XHRcdHdyaXRlVWludDY0OiBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdFx0aWYgKHZhbHVlID49IDkwMDcxOTkyNTQ3NDA5OTIgfHwgdmFsdWUgPD0gLTkwMDcxOTkyNTQ3NDA5OTIpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBlbmNvZGUgVWludDY0IG9mOiAnICsgdmFsdWUgKyAnIG1hZ25pdHVkZSB0byBiaWcgKGZsb2F0aW5nIHBvaW50IGVycm9ycyknKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLndyaXRlVWludDMyKE1hdGguZmxvb3IodmFsdWUvNDI5NDk2NzI5NikpO1xuXHRcdFx0XHR0aGlzLndyaXRlVWludDMyKHZhbHVlJTQyOTQ5NjcyOTYpO1xuXHRcdFx0fSxcblx0XHRcdHdyaXRlU3RyaW5nOiBub3RJbXBsZW1lbnRlZCgnd3JpdGVTdHJpbmcnKSxcblx0XHRcdGNhbldyaXRlQmluYXJ5OiBmdW5jdGlvbiAoY2h1bmspIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSxcblx0XHRcdHdyaXRlQmluYXJ5OiBub3RJbXBsZW1lbnRlZCgnd3JpdGVDaHVuaycpXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHJlYWRIZWFkZXJSYXcocmVhZGVyKSB7XG5cdFx0XHR2YXIgZmlyc3RCeXRlID0gcmVhZGVyLnJlYWRCeXRlKCk7XG5cdFx0XHR2YXIgbWFqb3JUeXBlID0gZmlyc3RCeXRlID4+IDUsIHZhbHVlID0gZmlyc3RCeXRlJjB4MWY7XG5cdFx0XHRyZXR1cm4ge3R5cGU6IG1ham9yVHlwZSwgdmFsdWU6IHZhbHVlfTtcblx0XHR9XG5cdFxuXHRcdGZ1bmN0aW9uIHZhbHVlRnJvbUhlYWRlcihoZWFkZXIsIHJlYWRlcikge1xuXHRcdFx0dmFyIHZhbHVlID0gaGVhZGVyLnZhbHVlO1xuXHRcdFx0aWYgKHZhbHVlIDwgMjQpIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0fSBlbHNlIGlmICh2YWx1ZSA9PSAyNCkge1xuXHRcdFx0XHRyZXR1cm4gcmVhZGVyLnJlYWRCeXRlKCk7XG5cdFx0XHR9IGVsc2UgaWYgKHZhbHVlID09IDI1KSB7XG5cdFx0XHRcdHJldHVybiByZWFkZXIucmVhZFVpbnQxNigpO1xuXHRcdFx0fSBlbHNlIGlmICh2YWx1ZSA9PSAyNikge1xuXHRcdFx0XHRyZXR1cm4gcmVhZGVyLnJlYWRVaW50MzIoKTtcblx0XHRcdH0gZWxzZSBpZiAodmFsdWUgPT0gMjcpIHtcblx0XHRcdFx0cmV0dXJuIHJlYWRlci5yZWFkVWludDY0KCk7XG5cdFx0XHR9IGVsc2UgaWYgKHZhbHVlID09IDMxKSB7XG5cdFx0XHRcdC8vIHNwZWNpYWwgdmFsdWUgZm9yIG5vbi10ZXJtaW5hdGluZyBhcnJheXMvb2JqZWN0c1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdG5vdEltcGxlbWVudGVkKCdBZGRpdGlvbmFsIGluZm86ICcgKyB2YWx1ZSkoKTtcblx0XHR9XG5cdFxuXHRcdGZ1bmN0aW9uIHdyaXRlSGVhZGVyUmF3KHR5cGUsIHZhbHVlLCB3cml0ZXIpIHtcblx0XHRcdHdyaXRlci53cml0ZUJ5dGUoKHR5cGU8PDUpfHZhbHVlKTtcblx0XHR9XG5cdFxuXHRcdGZ1bmN0aW9uIHdyaXRlSGVhZGVyKHR5cGUsIHZhbHVlLCB3cml0ZXIpIHtcblx0XHRcdHZhciBmaXJzdEJ5dGUgPSB0eXBlPDw1O1xuXHRcdFx0aWYgKHZhbHVlIDwgMjQpIHtcblx0XHRcdFx0d3JpdGVyLndyaXRlQnl0ZShmaXJzdEJ5dGV8dmFsdWUpO1xuXHRcdFx0fSBlbHNlIGlmICh2YWx1ZSA8IDI1Nikge1xuXHRcdFx0XHR3cml0ZXIud3JpdGVCeXRlKGZpcnN0Qnl0ZXwyNCk7XG5cdFx0XHRcdHdyaXRlci53cml0ZUJ5dGUodmFsdWUpO1xuXHRcdFx0fSBlbHNlIGlmICh2YWx1ZSA8IDY1NTM2KSB7XG5cdFx0XHRcdHdyaXRlci53cml0ZUJ5dGUoZmlyc3RCeXRlfDI1KTtcblx0XHRcdFx0d3JpdGVyLndyaXRlVWludDE2KHZhbHVlKTtcblx0XHRcdH0gZWxzZSBpZiAodmFsdWUgPCA0Mjk0OTY3Mjk2KSB7XG5cdFx0XHRcdHdyaXRlci53cml0ZUJ5dGUoZmlyc3RCeXRlfDI2KTtcblx0XHRcdFx0d3JpdGVyLndyaXRlVWludDMyKHZhbHVlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdyaXRlci53cml0ZUJ5dGUoZmlyc3RCeXRlfDI3KTtcblx0XHRcdFx0d3JpdGVyLndyaXRlVWludDY0KHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHZhciBzdG9wQ29kZSA9IG5ldyBFcnJvcigpOyAvLyBKdXN0IGEgdW5pcXVlIG9iamVjdCwgdGhhdCB3b24ndCBjb21wYXJlIHN0cmljdGx5IGVxdWFsIHRvIGFueXRoaW5nIGVsc2Vcblx0XG5cdFx0ZnVuY3Rpb24gZGVjb2RlUmVhZGVyKHJlYWRlcikge1xuXHRcdFx0dmFyIGhlYWRlciA9IHJlYWRIZWFkZXJSYXcocmVhZGVyKTtcblx0XHRcdHN3aXRjaCAoaGVhZGVyLnR5cGUpIHtcblx0XHRcdFx0Y2FzZSAwOlxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZUZyb21IZWFkZXIoaGVhZGVyLCByZWFkZXIpO1xuXHRcdFx0XHRjYXNlIDE6XG5cdFx0XHRcdFx0cmV0dXJuIC0xIC12YWx1ZUZyb21IZWFkZXIoaGVhZGVyLCByZWFkZXIpO1xuXHRcdFx0XHRjYXNlIDI6XG5cdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5yZWFkQ2h1bmsodmFsdWVGcm9tSGVhZGVyKGhlYWRlciwgcmVhZGVyKSk7XG5cdFx0XHRcdGNhc2UgMzpcblx0XHRcdFx0XHR2YXIgYnVmZmVyID0gcmVhZGVyLnJlYWRDaHVuayh2YWx1ZUZyb21IZWFkZXIoaGVhZGVyLCByZWFkZXIpKTtcblx0XHRcdFx0XHRyZXR1cm4gYnVmZmVyLnRvU3RyaW5nKCd1dGYtOCcpO1xuXHRcdFx0XHRjYXNlIDQ6XG5cdFx0XHRcdGNhc2UgNTpcblx0XHRcdFx0XHR2YXIgYXJyYXlMZW5ndGggPSB2YWx1ZUZyb21IZWFkZXIoaGVhZGVyLCByZWFkZXIpO1xuXHRcdFx0XHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHRcdFx0XHRpZiAoYXJyYXlMZW5ndGggIT09IG51bGwpIHtcblx0XHRcdFx0XHRcdGlmIChoZWFkZXIudHlwZSA9PT0gNSkge1xuXHRcdFx0XHRcdFx0XHRhcnJheUxlbmd0aCAqPSAyO1xuXHRcdFx0XHRcdFx0fSBcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlMZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRbaV0gPSBkZWNvZGVSZWFkZXIocmVhZGVyKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dmFyIGl0ZW07XG5cdFx0XHRcdFx0XHR3aGlsZSAoKGl0ZW0gPSBkZWNvZGVSZWFkZXIocmVhZGVyKSkgIT09IHN0b3BDb2RlKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaGVhZGVyLnR5cGUgPT09IDUpIHtcblx0XHRcdFx0XHRcdHZhciBvYmpSZXN1bHQgPSB7fTtcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSArPSAyKSB7XG5cdFx0XHRcdFx0XHRcdG9ialJlc3VsdFtyZXN1bHRbaV1dID0gcmVzdWx0W2kgKyAxXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiBvYmpSZXN1bHQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRjYXNlIDY6XG5cdFx0XHRcdFx0dmFyIHRhZyA9IHZhbHVlRnJvbUhlYWRlcihoZWFkZXIsIHJlYWRlcik7XG5cdFx0XHRcdFx0dmFyIGRlY29kZXIgPSBzZW1hbnRpY0RlY29kZXJzW3RhZ107XG5cdFx0XHRcdFx0dmFyIHJlc3VsdCA9IGRlY29kZVJlYWRlcihyZWFkZXIpO1xuXHRcdFx0XHRcdHJldHVybiBkZWNvZGVyID8gZGVjb2RlcihyZXN1bHQpIDogcmVzdWx0O1xuXHRcdFx0XHRjYXNlIDc6XG5cdFx0XHRcdFx0aWYgKGhlYWRlci52YWx1ZSA9PT0gMjUpIHtcblx0XHRcdFx0XHRcdHJldHVybiByZWFkZXIucmVhZEZsb2F0MTYoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGhlYWRlci52YWx1ZSA9PT0gMjYpIHtcblx0XHRcdFx0XHRcdHJldHVybiByZWFkZXIucmVhZEZsb2F0MzIoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGhlYWRlci52YWx1ZSA9PT0gMjcpIHtcblx0XHRcdFx0XHRcdHJldHVybiByZWFkZXIucmVhZEZsb2F0NjQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c3dpdGNoICh2YWx1ZUZyb21IZWFkZXIoaGVhZGVyLCByZWFkZXIpKSB7XG5cdFx0XHRcdFx0XHRjYXNlIDIwOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRjYXNlIDIxOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdGNhc2UgMjI6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHRcdFx0Y2FzZSAyMzpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdGNhc2UgbnVsbDpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHN0b3BDb2RlO1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGZpeGVkIHZhbHVlOiAnICsgaGVhZGVyLnZhbHVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBoZWFkZXI6ICcgKyBKU09OLnN0cmluZ2lmeShoZWFkZXIpKTtcblx0XHRcdH1cblx0XHRcdHRocm93IG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkIHlldCcpO1xuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gZW5jb2RlV3JpdGVyKGRhdGEsIHdyaXRlcikge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzZW1hbnRpY0VuY29kZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciByZXBsYWNlbWVudCA9IHNlbWFudGljRW5jb2RlcnNbaV0uZm4oZGF0YSk7XG5cdFx0XHRcdGlmIChyZXBsYWNlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0d3JpdGVIZWFkZXIoNiwgc2VtYW50aWNFbmNvZGVyc1tpXS50YWcsIHdyaXRlcik7XG5cdFx0XHRcdFx0cmV0dXJuIGVuY29kZVdyaXRlcihyZXBsYWNlbWVudCwgd3JpdGVyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFxuXHRcdFx0aWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEudG9DQk9SID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGRhdGEgPSBkYXRhLnRvQ0JPUigpO1xuXHRcdFx0fVxuXHRcdFxuXHRcdFx0aWYgKGRhdGEgPT09IGZhbHNlKSB7XG5cdFx0XHRcdHdyaXRlSGVhZGVyKDcsIDIwLCB3cml0ZXIpO1xuXHRcdFx0fSBlbHNlIGlmIChkYXRhID09PSB0cnVlKSB7XG5cdFx0XHRcdHdyaXRlSGVhZGVyKDcsIDIxLCB3cml0ZXIpO1xuXHRcdFx0fSBlbHNlIGlmIChkYXRhID09PSBudWxsKSB7XG5cdFx0XHRcdHdyaXRlSGVhZGVyKDcsIDIyLCB3cml0ZXIpO1xuXHRcdFx0fSBlbHNlIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0d3JpdGVIZWFkZXIoNywgMjMsIHdyaXRlcik7XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRpZiAoTWF0aC5mbG9vcihkYXRhKSA9PT0gZGF0YSAmJiBkYXRhIDwgOTAwNzE5OTI1NDc0MDk5MiAmJiBkYXRhID4gLTkwMDcxOTkyNTQ3NDA5OTIpIHtcblx0XHRcdFx0XHQvLyBJbnRlZ2VyXG5cdFx0XHRcdFx0aWYgKGRhdGEgPCAwKSB7XG5cdFx0XHRcdFx0XHR3cml0ZUhlYWRlcigxLCAtMSAtIGRhdGEsIHdyaXRlcik7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHdyaXRlSGVhZGVyKDAsIGRhdGEsIHdyaXRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHdyaXRlSGVhZGVyUmF3KDcsIDI3LCB3cml0ZXIpO1xuXHRcdFx0XHRcdHdyaXRlci53cml0ZUZsb2F0NjQoZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdHdyaXRlci53cml0ZVN0cmluZyhkYXRhLCBmdW5jdGlvbiAobGVuZ3RoKSB7XG5cdFx0XHRcdFx0d3JpdGVIZWFkZXIoMywgbGVuZ3RoLCB3cml0ZXIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSBpZiAod3JpdGVyLmNhbldyaXRlQmluYXJ5KGRhdGEpKSB7XG5cdFx0XHRcdHdyaXRlci53cml0ZUJpbmFyeShkYXRhLCBmdW5jdGlvbiAobGVuZ3RoKSB7XG5cdFx0XHRcdFx0d3JpdGVIZWFkZXIoMiwgbGVuZ3RoLCB3cml0ZXIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGlmIChhcGkuY29uZmlnLnVzZVRvSlNPTiAmJiB0eXBlb2YgZGF0YS50b0pTT04gPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdCAgIFx0XHRkYXRhID0gZGF0YS50b0pTT04oKTtcblx0XHRcdCAgIFx0fVxuXHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuXHRcdFx0XHRcdHdyaXRlSGVhZGVyKDQsIGRhdGEubGVuZ3RoLCB3cml0ZXIpO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0ZW5jb2RlV3JpdGVyKGRhdGFbaV0sIHdyaXRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG5cdFx0XHRcdFx0d3JpdGVIZWFkZXIoNSwga2V5cy5sZW5ndGgsIHdyaXRlcik7XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRlbmNvZGVXcml0ZXIoa2V5c1tpXSwgd3JpdGVyKTtcblx0XHRcdFx0XHRcdGVuY29kZVdyaXRlcihkYXRhW2tleXNbaV1dLCB3cml0ZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdDQk9SIGVuY29kaW5nIG5vdCBzdXBwb3J0ZWQ6ICcgKyBkYXRhKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0dmFyIHJlYWRlckZ1bmN0aW9ucyA9IFtdO1xuXHRcdHZhciB3cml0ZXJGdW5jdGlvbnMgPSBbXTtcblx0XG5cdFx0dmFyIGFwaSA9IHtcblx0XHRcdGNvbmZpZzoge1xuXHRcdFx0XHR1c2VUb0pTT046IHRydWVcblx0XHRcdH0sXG5cdFx0XHRhZGRXcml0ZXI6IGZ1bmN0aW9uIChmb3JtYXQsIHdyaXRlckZ1bmN0aW9uKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgZm9ybWF0ID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdHdyaXRlckZ1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uIChmKSB7XG5cdFx0XHRcdFx0XHRpZiAoZm9ybWF0ID09PSBmKSByZXR1cm4gd3JpdGVyRnVuY3Rpb24oZik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0d3JpdGVyRnVuY3Rpb25zLnB1c2goZm9ybWF0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGFkZFJlYWRlcjogZnVuY3Rpb24gKGZvcm1hdCwgcmVhZGVyRnVuY3Rpb24pIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBmb3JtYXQgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdFx0cmVhZGVyRnVuY3Rpb25zLnB1c2goZnVuY3Rpb24gKGRhdGEsIGYpIHtcblx0XHRcdFx0XHRcdGlmIChmb3JtYXQgPT09IGYpIHJldHVybiByZWFkZXJGdW5jdGlvbihkYXRhLCBmKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZWFkZXJGdW5jdGlvbnMucHVzaChmb3JtYXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZW5jb2RlOiBmdW5jdGlvbiAoZGF0YSwgZm9ybWF0KSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgd3JpdGVyRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0dmFyIGZ1bmMgPSB3cml0ZXJGdW5jdGlvbnNbaV07XG5cdFx0XHRcdFx0dmFyIHdyaXRlciA9IGZ1bmMoZm9ybWF0KTtcblx0XHRcdFx0XHRpZiAod3JpdGVyKSB7XG5cdFx0XHRcdFx0XHRlbmNvZGVXcml0ZXIoZGF0YSwgd3JpdGVyKTtcblx0XHRcdFx0XHRcdHJldHVybiB3cml0ZXIucmVzdWx0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgb3V0cHV0IGZvcm1hdDogJyArIGZvcm1hdCk7XG5cdFx0XHR9LFxuXHRcdFx0ZGVjb2RlOiBmdW5jdGlvbiAoZGF0YSwgZm9ybWF0KSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVhZGVyRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0dmFyIGZ1bmMgPSByZWFkZXJGdW5jdGlvbnNbaV07XG5cdFx0XHRcdFx0dmFyIHJlYWRlciA9IGZ1bmMoZGF0YSwgZm9ybWF0KTtcblx0XHRcdFx0XHRpZiAocmVhZGVyKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGVjb2RlUmVhZGVyKHJlYWRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgaW5wdXQgZm9ybWF0OiAnICsgZm9ybWF0KTtcblx0XHRcdH0sXG5cdFx0XHRhZGRTZW1hbnRpY0VuY29kZTogZnVuY3Rpb24gKHRhZywgZm4pIHtcblx0XHRcdFx0aWYgKHR5cGVvZiB0YWcgIT09ICdudW1iZXInIHx8IHRhZyUxICE9PSAwIHx8IHRhZyA8IDApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1RhZyBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcicpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNlbWFudGljRW5jb2RlcnMucHVzaCh7dGFnOiB0YWcsIGZuOiBmbn0pO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRhZGRTZW1hbnRpY0RlY29kZTogZnVuY3Rpb24gKHRhZywgZm4pIHtcblx0XHRcdFx0aWYgKHR5cGVvZiB0YWcgIT09ICdudW1iZXInIHx8IHRhZyUxICE9PSAwIHx8IHRhZyA8IDApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1RhZyBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcicpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNlbWFudGljRGVjb2RlcnNbdGFnXSA9IGZuO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRSZWFkZXI6IFJlYWRlcixcblx0XHRcdFdyaXRlcjogV3JpdGVyXG5cdFx0fTtcblx0XHRcblx0XHQvKiogTm9kZS5qcyBCdWZmZXJzICoqL1xuXHRcdGZ1bmN0aW9uIEJ1ZmZlclJlYWRlcihidWZmZXIpIHtcblx0XHRcdHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuXHRcdFx0dGhpcy5wb3MgPSAwO1xuXHRcdH1cblx0XHRCdWZmZXJSZWFkZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShSZWFkZXIucHJvdG90eXBlKTtcblx0XHRCdWZmZXJSZWFkZXIucHJvdG90eXBlLnBlZWtCeXRlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMucG9zXTtcblx0XHR9O1xuXHRcdEJ1ZmZlclJlYWRlci5wcm90b3R5cGUucmVhZEJ5dGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5wb3MrK107XG5cdFx0fTtcblx0XHRCdWZmZXJSZWFkZXIucHJvdG90eXBlLnJlYWRVaW50MTYgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gdGhpcy5idWZmZXIucmVhZFVJbnQxNkJFKHRoaXMucG9zKTtcblx0XHRcdHRoaXMucG9zICs9IDI7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH07XG5cdFx0QnVmZmVyUmVhZGVyLnByb3RvdHlwZS5yZWFkVWludDMyID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHJlc3VsdCA9IHRoaXMuYnVmZmVyLnJlYWRVSW50MzJCRSh0aGlzLnBvcyk7XG5cdFx0XHR0aGlzLnBvcyArPSA0O1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9O1xuXHRcdEJ1ZmZlclJlYWRlci5wcm90b3R5cGUucmVhZEZsb2F0MzIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gdGhpcy5idWZmZXIucmVhZEZsb2F0QkUodGhpcy5wb3MpO1xuXHRcdFx0dGhpcy5wb3MgKz0gNDtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fTtcblx0XHRCdWZmZXJSZWFkZXIucHJvdG90eXBlLnJlYWRGbG9hdDY0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHJlc3VsdCA9IHRoaXMuYnVmZmVyLnJlYWREb3VibGVCRSh0aGlzLnBvcyk7XG5cdFx0XHR0aGlzLnBvcyArPSA4O1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9O1xuXHRcdEJ1ZmZlclJlYWRlci5wcm90b3R5cGUucmVhZENodW5rID0gZnVuY3Rpb24gKGxlbmd0aCkge1xuXHRcdFx0dmFyIHJlc3VsdCA9IEJ1ZmZlci5hbGxvYyhsZW5ndGgpO1xuXHRcdFx0dGhpcy5idWZmZXIuY29weShyZXN1bHQsIDAsIHRoaXMucG9zLCB0aGlzLnBvcyArPSBsZW5ndGgpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBCdWZmZXJXcml0ZXIoc3RyaW5nRm9ybWF0KSB7XG5cdFx0XHR0aGlzLmJ5dGVMZW5ndGggPSAwO1xuXHRcdFx0dGhpcy5kZWZhdWx0QnVmZmVyTGVuZ3RoID0gMTYzODQ7IC8vIDE2a1xuXHRcdFx0dGhpcy5sYXRlc3RCdWZmZXIgPSBCdWZmZXIuYWxsb2ModGhpcy5kZWZhdWx0QnVmZmVyTGVuZ3RoKTtcblx0XHRcdHRoaXMubGF0ZXN0QnVmZmVyT2Zmc2V0ID0gMDtcblx0XHRcdHRoaXMuY29tcGxldGVCdWZmZXJzID0gW107XG5cdFx0XHR0aGlzLnN0cmluZ0Zvcm1hdCA9IHN0cmluZ0Zvcm1hdDtcblx0XHR9XG5cdFx0QnVmZmVyV3JpdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoV3JpdGVyLnByb3RvdHlwZSk7XG5cdFx0QnVmZmVyV3JpdGVyLnByb3RvdHlwZS53cml0ZUJ5dGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdHRoaXMubGF0ZXN0QnVmZmVyW3RoaXMubGF0ZXN0QnVmZmVyT2Zmc2V0KytdID0gdmFsdWU7XG5cdFx0XHRpZiAodGhpcy5sYXRlc3RCdWZmZXJPZmZzZXQgPj0gdGhpcy5sYXRlc3RCdWZmZXIubGVuZ3RoKSB7XG5cdFx0XHRcdHRoaXMuY29tcGxldGVCdWZmZXJzLnB1c2godGhpcy5sYXRlc3RCdWZmZXIpO1xuXHRcdFx0XHR0aGlzLmxhdGVzdEJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyh0aGlzLmRlZmF1bHRCdWZmZXJMZW5ndGgpO1xuXHRcdFx0XHR0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCA9IDA7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmJ5dGVMZW5ndGgrKztcblx0XHR9XG5cdFx0QnVmZmVyV3JpdGVyLnByb3RvdHlwZS53cml0ZUZsb2F0MzIgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG5cdFx0XHRidWZmZXIud3JpdGVGbG9hdEJFKHZhbHVlLCAwKTtcblx0XHRcdHRoaXMud3JpdGVCdWZmZXIoYnVmZmVyKTtcblx0XHR9O1xuXHRcdEJ1ZmZlcldyaXRlci5wcm90b3R5cGUud3JpdGVGbG9hdDY0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHR2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jKDgpO1xuXHRcdFx0YnVmZmVyLndyaXRlRG91YmxlQkUodmFsdWUsIDApO1xuXHRcdFx0dGhpcy53cml0ZUJ1ZmZlcihidWZmZXIpO1xuXHRcdH07XG5cdFx0QnVmZmVyV3JpdGVyLnByb3RvdHlwZS53cml0ZVN0cmluZyA9IGZ1bmN0aW9uIChzdHJpbmcsIGxlbmd0aEZ1bmMpIHtcblx0XHRcdHZhciBidWZmZXIgPSBCdWZmZXIuZnJvbShzdHJpbmcsICd1dGYtOCcpO1xuXHRcdFx0bGVuZ3RoRnVuYyhidWZmZXIubGVuZ3RoKTtcblx0XHRcdHRoaXMud3JpdGVCdWZmZXIoYnVmZmVyKTtcblx0XHR9O1xuXHRcdEJ1ZmZlcldyaXRlci5wcm90b3R5cGUuY2FuV3JpdGVCaW5hcnkgPSBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0cmV0dXJuIGRhdGEgaW5zdGFuY2VvZiBCdWZmZXI7XG5cdFx0fTtcblx0XHRCdWZmZXJXcml0ZXIucHJvdG90eXBlLndyaXRlQmluYXJ5ID0gZnVuY3Rpb24gKGJ1ZmZlciwgbGVuZ3RoRnVuYykge1xuXHRcdFx0bGVuZ3RoRnVuYyhidWZmZXIubGVuZ3RoKTtcblx0XHRcdHRoaXMud3JpdGVCdWZmZXIoYnVmZmVyKTtcblx0XHR9O1xuXHRcdEJ1ZmZlcldyaXRlci5wcm90b3R5cGUud3JpdGVCdWZmZXIgPSBmdW5jdGlvbiAoY2h1bmspIHtcblx0XHRcdGlmICghKGNodW5rIGluc3RhbmNlb2YgQnVmZmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQnVmZmVyV3JpdGVyIG9ubHkgYWNjZXB0cyBCdWZmZXJzJyk7XG5cdFx0XHRpZiAoIXRoaXMubGF0ZXN0QnVmZmVyT2Zmc2V0KSB7XG5cdFx0XHRcdHRoaXMuY29tcGxldGVCdWZmZXJzLnB1c2goY2h1bmspO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmxhdGVzdEJ1ZmZlci5sZW5ndGggLSB0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCA+PSBjaHVuay5sZW5ndGgpIHtcblx0XHRcdFx0Y2h1bmsuY29weSh0aGlzLmxhdGVzdEJ1ZmZlciwgdGhpcy5sYXRlc3RCdWZmZXJPZmZzZXQpO1xuXHRcdFx0XHR0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCArPSBjaHVuay5sZW5ndGg7XG5cdFx0XHRcdGlmICh0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCA+PSB0aGlzLmxhdGVzdEJ1ZmZlci5sZW5ndGgpIHtcblx0XHRcdFx0XHR0aGlzLmNvbXBsZXRlQnVmZmVycy5wdXNoKHRoaXMubGF0ZXN0QnVmZmVyKTtcblx0XHRcdFx0XHR0aGlzLmxhdGVzdEJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyh0aGlzLmRlZmF1bHRCdWZmZXJMZW5ndGgpO1xuXHRcdFx0XHRcdHRoaXMubGF0ZXN0QnVmZmVyT2Zmc2V0ID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5jb21wbGV0ZUJ1ZmZlcnMucHVzaCh0aGlzLmxhdGVzdEJ1ZmZlci5zbGljZSgwLCB0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCkpO1xuXHRcdFx0XHR0aGlzLmNvbXBsZXRlQnVmZmVycy5wdXNoKGNodW5rKTtcblx0XHRcdFx0dGhpcy5sYXRlc3RCdWZmZXIgPSBCdWZmZXIuYWxsb2ModGhpcy5kZWZhdWx0QnVmZmVyTGVuZ3RoKTtcblx0XHRcdFx0dGhpcy5sYXRlc3RCdWZmZXJPZmZzZXQgPSAwO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5ieXRlTGVuZ3RoICs9IGNodW5rLmxlbmd0aDtcblx0XHR9XG5cdFx0QnVmZmVyV3JpdGVyLnByb3RvdHlwZS5yZXN1bHQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyBDb3BpZXMgdGhlbSBhbGwgaW50byBhIHNpbmdsZSBCdWZmZXJcblx0XHRcdHZhciByZXN1bHQgPSBCdWZmZXIuYWxsb2ModGhpcy5ieXRlTGVuZ3RoKTtcblx0XHRcdHZhciBvZmZzZXQgPSAwO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbXBsZXRlQnVmZmVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgYnVmZmVyID0gdGhpcy5jb21wbGV0ZUJ1ZmZlcnNbaV07XG5cdFx0XHRcdGJ1ZmZlci5jb3B5KHJlc3VsdCwgb2Zmc2V0LCAwLCBidWZmZXIubGVuZ3RoKTtcblx0XHRcdFx0b2Zmc2V0ICs9IGJ1ZmZlci5sZW5ndGg7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5sYXRlc3RCdWZmZXJPZmZzZXQpIHtcblx0XHRcdFx0dGhpcy5sYXRlc3RCdWZmZXIuY29weShyZXN1bHQsIG9mZnNldCwgMCwgdGhpcy5sYXRlc3RCdWZmZXJPZmZzZXQpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAodGhpcy5zdHJpbmdGb3JtYXQpIHJldHVybiByZXN1bHQudG9TdHJpbmcodGhpcy5zdHJpbmdGb3JtYXQpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdFx0XG5cdFx0aWYgKHR5cGVvZiBCdWZmZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGFwaS5hZGRSZWFkZXIoZnVuY3Rpb24gKGRhdGEsIGZvcm1hdCkge1xuXHRcdFx0XHRpZiAoZGF0YSBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuXHRcdFx0XHRcdHJldHVybiBuZXcgQnVmZmVyUmVhZGVyKGRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChmb3JtYXQgPT09ICdoZXgnIHx8IGZvcm1hdCA9PT0gJ2Jhc2U2NCcpIHtcblx0XHRcdFx0XHR2YXIgYnVmZmVyID0gQnVmZmVyLmZyb20oZGF0YSwgZm9ybWF0KTtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IEJ1ZmZlclJlYWRlcihidWZmZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGFwaS5hZGRXcml0ZXIoZnVuY3Rpb24gKGZvcm1hdCkge1xuXHRcdFx0XHRpZiAoIWZvcm1hdCB8fCBmb3JtYXQgPT09ICdidWZmZXInKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBCdWZmZXJXcml0ZXIoKTtcblx0XHRcdFx0fSBlbHNlIGlmIChmb3JtYXQgPT09ICdoZXgnIHx8IGZvcm1hdCA9PT0gJ2Jhc2U2NCcpIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IEJ1ZmZlcldyaXRlcihmb3JtYXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0XG5cdFx0LyoqIEhleC1lbmNvZGluZyAoYW5kIExhdGluMSkgZm9yIGJyb3dzZXIgKiovXG5cdFx0ZnVuY3Rpb24gSGV4UmVhZGVyKGhleCkge1xuXHRcdFx0dGhpcy5oZXggPSBoZXg7XG5cdFx0XHR0aGlzLnBvcyA9IDA7XG5cdFx0fVxuXHRcdEhleFJlYWRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlYWRlci5wcm90b3R5cGUpO1xuXHRcdEhleFJlYWRlci5wcm90b3R5cGUucGVla0J5dGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgcGFpciA9IHRoaXMuaGV4LnN1YnN0cmluZyh0aGlzLnBvcywgMik7XG5cdFx0XHRyZXR1cm4gcGFyc2VJbnQocGFpciwgMTYpO1xuXHRcdH07XG5cdFx0SGV4UmVhZGVyLnByb3RvdHlwZS5yZWFkQnl0ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBwYWlyID0gdGhpcy5oZXguc3Vic3RyaW5nKHRoaXMucG9zLCB0aGlzLnBvcyArIDIpO1xuXHRcdFx0dGhpcy5wb3MgKz0gMjtcblx0XHRcdHJldHVybiBwYXJzZUludChwYWlyLCAxNik7XG5cdFx0fTtcblx0XHRIZXhSZWFkZXIucHJvdG90eXBlLnJlYWRDaHVuayA9IGZ1bmN0aW9uIChsZW5ndGgpIHtcblx0XHRcdHZhciBoZXggPSB0aGlzLmhleC5zdWJzdHJpbmcodGhpcy5wb3MsIHRoaXMucG9zICsgbGVuZ3RoKjIpO1xuXHRcdFx0dGhpcy5wb3MgKz0gbGVuZ3RoKjI7XG5cdFx0XHRpZiAodHlwZW9mIEJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIEJ1ZmZlci5mcm9tKGhleCwgJ2hleCcpO1xuXHRcdFx0cmV0dXJuIG5ldyBCaW5hcnlIZXgoaGV4KTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBIZXhXcml0ZXIoZmluYWxGb3JtYXQpIHtcblx0XHRcdHRoaXMuJGhleCA9ICcnO1xuXHRcdFx0dGhpcy5maW5hbEZvcm1hdCA9IGZpbmFsRm9ybWF0IHx8ICdoZXgnXG5cdFx0fVxuXHRcdEhleFdyaXRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFdyaXRlci5wcm90b3R5cGUpO1xuXHRcdEhleFdyaXRlci5wcm90b3R5cGUud3JpdGVCeXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRpZiAodmFsdWUgPCAwIHx8IHZhbHVlID4gMjU1KSB0aHJvdyBuZXcgRXJyb3IoJ0J5dGUgdmFsdWUgb3V0IG9mIHJhbmdlOiAnICsgdmFsdWUpO1xuXHRcdFx0dmFyIGhleCA9IHZhbHVlLnRvU3RyaW5nKDE2KTtcblx0XHRcdGlmIChoZXgubGVuZ3RoID09IDEpIHtcblx0XHRcdFx0aGV4ID0gJzAnICsgaGV4O1xuXHRcdFx0fVxuXHRcdFx0dGhpcy4kaGV4ICs9IGhleDtcblx0XHR9XG5cdFx0SGV4V3JpdGVyLnByb3RvdHlwZS5jYW5Xcml0ZUJpbmFyeSA9IGZ1bmN0aW9uIChjaHVuaykge1xuXHRcdFx0cmV0dXJuIGNodW5rIGluc3RhbmNlb2YgQmluYXJ5SGV4IHx8ICh0eXBlb2YgQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIGNodW5rIGluc3RhbmNlb2YgQnVmZmVyKTtcblx0XHR9XG5cdFx0SGV4V3JpdGVyLnByb3RvdHlwZS53cml0ZUJpbmFyeSA9IGZ1bmN0aW9uIChjaHVuaywgbGVuZ3RoRnVuY3Rpb24pIHtcblx0XHRcdGlmIChjaHVuayBpbnN0YW5jZW9mIEJpbmFyeUhleCkge1xuXHRcdFx0XHRsZW5ndGhGdW5jdGlvbihjaHVuay5sZW5ndGgoKSk7XG5cdFx0XHRcdHRoaXMuJGhleCArPSBjaHVuay4kaGV4O1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIGNodW5rIGluc3RhbmNlb2YgQnVmZmVyKSB7XG5cdFx0XHRcdGxlbmd0aEZ1bmN0aW9uKGNodW5rLmxlbmd0aCk7XG5cdFx0XHRcdHRoaXMuJGhleCArPSBjaHVuay50b1N0cmluZygnaGV4Jyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdIZXhXcml0ZXIgb25seSBhY2NlcHRzIEJpbmFyeUhleCBvciBCdWZmZXJzJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdEhleFdyaXRlci5wcm90b3R5cGUucmVzdWx0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHRoaXMuZmluYWxGb3JtYXQgPT09ICdidWZmZXInICYmIHR5cGVvZiBCdWZmZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0cmV0dXJuIEJ1ZmZlci5mcm9tKHRoaXMuJGhleCwgJ2hleCcpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBCaW5hcnlIZXgodGhpcy4kaGV4KS50b1N0cmluZyh0aGlzLmZpbmFsRm9ybWF0KTtcblx0XHR9XG5cdFx0SGV4V3JpdGVyLnByb3RvdHlwZS53cml0ZVN0cmluZyA9IGZ1bmN0aW9uIChzdHJpbmcsIGxlbmd0aEZ1bmN0aW9uKSB7XG5cdFx0XHR2YXIgYnVmZmVyID0gQmluYXJ5SGV4LmZyb21VdGY4U3RyaW5nKHN0cmluZyk7XG5cdFx0XHRsZW5ndGhGdW5jdGlvbihidWZmZXIubGVuZ3RoKCkpO1xuXHRcdFx0dGhpcy4kaGV4ICs9IGJ1ZmZlci4kaGV4O1xuXHRcdH1cblxuXHRcdGFwaS5hZGRSZWFkZXIoZnVuY3Rpb24gKGRhdGEsIGZvcm1hdCkge1xuXHRcdFx0aWYgKGRhdGEgaW5zdGFuY2VvZiBCaW5hcnlIZXggfHwgZGF0YS4kaGV4KSB7XG5cdFx0XHRcdHJldHVybiBuZXcgSGV4UmVhZGVyKGRhdGEuJGhleCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZm9ybWF0ID09PSAnaGV4Jykge1xuXHRcdFx0XHRyZXR1cm4gbmV3IEhleFJlYWRlcihkYXRhKVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGFwaS5hZGRXcml0ZXIoZnVuY3Rpb24gKGZvcm1hdCkge1xuXHRcdFx0aWYgKGZvcm1hdCA9PT0gJ2hleCcpIHtcblx0XHRcdFx0cmV0dXJuIG5ldyBIZXhXcml0ZXIoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBhcGk7XG5cdH0pKCk7XG5cblx0Q0JPUi5hZGRTZW1hbnRpY0VuY29kZSgwLCBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdGlmIChkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuXHRcdFx0cmV0dXJuIGRhdGEudG9JU09TdHJpbmcoKTtcblx0XHR9XG5cdH0pLmFkZFNlbWFudGljRGVjb2RlKDAsIGZ1bmN0aW9uIChpc29TdHJpbmcpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUoaXNvU3RyaW5nKTtcblx0fSkuYWRkU2VtYW50aWNEZWNvZGUoMSwgZnVuY3Rpb24gKGlzb1N0cmluZykge1xuXHRcdHJldHVybiBuZXcgRGF0ZShpc29TdHJpbmcpO1xuXHR9KTtcblxuXHRyZXR1cm4gQ0JPUjtcbn0pOyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/cbor-sync@1.0.4/node_modules/cbor-sync/main.js\n");

/***/ })

};
;